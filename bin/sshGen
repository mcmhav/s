#!/usr/bin/env bash

source param_parser --params "m n" --incomming_params "$@"

KEY_MAIL="mcmhav@gmail.com"
KEY_TYPE="ed25519"
KEY_NAME="id_$KEY_TYPE"

if [ -n "$PARAM_M" ]; then
  KEY_MAIL="$PARAM_M"
fi

if [ -n "$PARAM_N" ]; then
  KEY_NAME="$PARAM_N"
fi

if [ ! -d "$HOME/.ssh" ]; then
  mkdir "$HOME/.ssh"
fi

if [ ! -f "$HOME/.ssh/$KEY_NAME" ]; then
  ssh-keygen -t "$KEY_TYPE" -b 4096 -C "$KEY_MAIL" -f "$HOME/.ssh/$KEY_NAME" -N "" -q
else
  loggit "Not forced, $KEY_NAME already exists"
fi
